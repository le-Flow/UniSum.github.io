## Inhalte

* MSR-Kreislauf (Messen, Steuern, Regeln)
* Anbindung an den technischen Prozess (Sample&Hold-Schaltungen, A/D-Wandlung)
* Sensoren und Aktuatoren
* Verarbeitungseinheiten (Prozessoren, rekonfigurierbare Logiken, ASICs)

---

## Wichtige Konzepte

### MSR-Kreislauf
Beschreibt den geschlossenen Regelkreis.
1.  **Sensorik:** Erfasst den Prozesszustand (Messgrößenaufnahme, Wandlung, Aufbereitung).
2.  **Verarbeitung:** Der Mikroprozessor ($\mu P$) verarbeitet die Daten.
3.  **Aktorik:** Die Verarbeitungseinheit wirkt über Leistungselektronik und Wandler wieder auf den Prozess ein.

---

### Signalverarbeitungsprozess (A/D-Wandlung)
Der Weg vom analogen Eingangssignal zum digitalen Signal.

#### Nyquist-Shannon-Abtasttheorem
Die Abtastfrequenz $f_a$ muss mindestens doppelt so hoch sein wie die höchste im Signal vorkommende Frequenz (Grenzfrequenz $f_g$), um das Signal korrekt rekonstruieren zu können.

$$f_a > 2f_g$$

#### Aliasing
Wird das Theorem verletzt ($f_a \le 2f_g$), kommt es zu einer Überlappung der Frequenzspektren. Hohe Frequenzen werden fälschlicherweise als niedrigere Frequenzen interpretiert, was zu massiven Messfehlern führt.

#### Anti-Aliasing-Filter
Um Aliasing zu verhindern, wird ein **Tiefpassfilter** vor die Abtastung geschaltet. Es filtert alle Frequenzen oberhalb der halben Abtastrate ($f_g < f_a/2$) heraus. Oft wird ein einfaches passives **RC-Glied** genutzt, dessen Grenzfrequenz $f_g$ sich berechnet als:

$$f_g = \frac{1}{2\pi RC}$$

#### Sample & Hold (S&H) / Zeitquantisierung

Eine Schaltung (im Prinzip ein Schalter mit Kondensator), die den analogen Spannungswert am Abtastzeitpunkt "einfriert" und für die Dauer der A/D-Wandlung **konstant hält**. Dies ist nötig, da der Wandler eine gewisse Zeit (Wandlungszeit) benötigt.

#### A/D-Wandler / Amplitudenquantisierung
Setzt den konstanten analogen Spannungswert in einen diskreten digitalen Wert um.

* **Wägeverfahren (Successive Approximation):** Ein direkter Wandler, der die Eingangsspannung schrittweise (Bit für Bit, von MSB zu LSB) mit einer Referenzspannung vergleicht (z.B. $U > U_V/2$? $\to$ Bit = 1). Die Wandlungsdauer wächst mit der Auflösung.
* **Parallele Wandler (Flash):** Sehr schnell, da alle $2^n-1$ möglichen Spannungsstufen gleichzeitig mit Komparatoren verglichen werden. Nachteil: Extrem hoher Schaltungsaufwand (z.B. 8-Bit $\to$ 255 Komparatoren).
* **Integrierende Wandler (z.B. Dual-Slope):** Langsam, aber sehr genau und robust, da die Spannung über eine Zeit integriert wird.

---

### Rückführungsprozess (D/A-Wandlung)
Der Weg vom digitalen Signal zurück zum analogen Ausgangssignal.

#### D/A-Wandler Methoden
* **Widerstandsnetzwerk:** Addiert Teilströme, die über Schalter (gesteuert durch die Bits) gewichtet werden.
    
$$I_S = \frac{U_{\text{ref}}}{2^{n-1}R} \sum_{i=0}^{n-1} b_i 2^i$$

* **R-2R-Kettenleiter:**  Eine clevere Alternative, die nur **zwei verschiedene Widerstandswerte** (R und 2R) benötigt. Diese lassen sich mit sehr kleinen Toleranzen herstellen und sind daher für höhere Auflösungen besser geeignet.

#### Pulsweiten-Modulation (PWM)
Eine alternative (digitale) Methode zur Erzeugung eines analogen Signals. Ein digitales Signal wird mit konstanter Frequenz, aber variablem Tastverhältnis ($t_{\text{ein}} / t_{\text{Periode}}$) ausgegeben. Ein nachgeschalteter **Tiefpass filtert** dieses Signal und erzeugt eine analoge Durchschnittsspannung:

$$U_{\text{aus}} = U_{\text{ref}} \cdot \frac{t_{\text{ein}}}{t_{\text{Periode}}}$$

*(Anwendung: LED-Dimmung, Motor-Drehzahlsteuerung)*

#### Störungen & Filterung
* **Hazards (Glitches):** Unerwünschte, kurze Spannungsspitzen am D/A-Ausgang. Sie entstehen, wenn mehrere Bits nicht exakt synchron kippen (z.B. Wechsel `0111` $\to$ `1000`).
* **Deglitcher (Hazard-Unterdrückung):** Ein S&H-Verstärker nach dem D/A-Wandler, der den letzten stabilen Analogwert hält, bis der neue Wert stabil ist.
* **Datenrekonstruktion (Filter):** Ein abschließender **Tiefpassfilter** glättet den treppenartigen Spannungsverlauf am Ausgang zu einem sauberen Signal.

---

### Sensoren
Erfassen den Prozesszustand. Sie wandeln nichtelektrische Größen (z. B. mechanisch, thermisch) in elektrische Größen (z. B. U, I, R, C) um.

#### Klassifikation
* **Extrinsisch** (erfassen Umgebung) vs. **Intrinsisch** (erfassen Systemzustand).
* **Passiv/Rezeptiv** (Stimulus erzeugt Energie/Signal) vs. **Aktiv/Signalbearbeitend** (Stimulus ändert Parameter).

#### Integrationsstufen
1.  **Elementarsensor:** Rein physikalischer Wandler.
2.  **Integrierter Sensor:** Sensor + Signalaufbereitung/Verstärkung.
3.  **Intelligenter Sensor:** Sensor + Aufbereitung + Vorverarbeitung (Digitalisierung, Skalierung).

#### Beispiel: Optischer Encoder
Ein inkrementeller Positions-/Winkelsensor. Ein Maßstab (hell/dunkel) wird abgetastet. Zwei um 0.25 Perioden versetzte Detektoren (A und B) ermöglichen die Erkennung der **Bewegungsrichtung** und Zählung der Inkremente.

#### Beispiel: Beschleunigungssensor (Kapazitiv)
Basiert auf dem Prinzip $F = m \cdot a$. Eine träge Masse (m) ist an Federn (k) als mittlere Platte eines **Differentialkondensators** ($C_1$, $C_2$) befestigt. Eine Beschleunigung sorgt für Auslenkung $\Delta d$ und ändert die Kapazitäten gegenläufig.

---

### Aktuatoren
Wandeln elektrische Energie (Steuergröße) in mechanische Arbeit um.

#### Elektrische Antriebe (Grundprinzip)
Nutzen die **Lorentzkraft** auf einen stromdurchflossenen Leiter in einem Magnetfeld: $F = I \times B$.

#### Gleichstrommotor (DC)
* **Typen:** Bürstenbehaftet (mechanische Kommutierung) oder Bürstenlos (BLDC, elektronisch).
* **Drehmoment:** $M = I \cdot k$ (linear vom Strom abhängig).
* **Gegenspannung (EMK):** $U_L = k \cdot \omega$ (linear von Drehzahl abhängig).
* **Kennlinie:** $\omega = \frac{U}{k} - \frac{R}{k^2} \cdot M$ (lineare Kennlinie).
* **Betriebspunkte:** Max. Drehmoment bei Stillstand. Max. Leistung bei halber Leerlaufdrehzahl.

#### Schrittmotor (Stepper)
Ein Motor, der durch digitale Stromimpulse angesteuert wird.
* **Winkelschritt:** $\alpha = 360 / (2p \cdot m)$
* **Vorteil:** Positionierung ohne Sensor ("open loop") möglich.
* **Nachteil:** Geringeres Drehmoment; Gefahr von Schrittverlusten bei Überlast.

#### Leistungselektronik (H-Brücke)


Eine Schaltung aus vier Schaltern (z.B. MOSFETs) zur Ansteuerung von DC-Motoren.
* **Drehrichtung:** Durch diagonales Schließen der Schalter (S1+S4 oder S2+S3).
* **Regelung:** Über **PWM-Ansteuerung** der Schalter wird die effektive Motorspannung variiert.

---

### Verarbeitungseinheiten
Der Effizienz-/Flexibilitätskonflikt:
* **ASICs:** Höchste Effizienz, keine Flexibilität.
* **Prozessoren:** Geringste Effizienz, höchste Flexibilität.
* **FPGAs:** Liegen dazwischen.

#### ASICs (Application-Specific Integrated Circuits)
Fest verdrahtete Schaltungen. Funktion ist nachträglich nicht änderbar. Lohnen sich nur bei extrem hohen Stückzahlen oder extremen Effizienzanforderungen.

#### Prozessoren
Flexibel programmierbar. Energieoptimierung durch angepasste Befehlssätze (DSP), dynamische Taktung und **Energiesparzustände** (Run, Idle, Sleep).

#### FPGAs (Field Programmable Gate Arrays)
Rekonfigurierbare Logik. Die Funktion wird durch eine Konfigurationsdatei (Bitstream) in ein internes RAM geladen.
* **CLB (Configurable Logic Block):** Basisblock aus **Look-Up Table (LUT)** (für Logik), Flip-Flop (Speicher) und Multiplexern.
* **SoC:** Moderne FPGAs enthalten oft zusätzlich feste Prozessorkerne (z.B. ARM).